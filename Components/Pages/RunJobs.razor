@page "/"
@using EasyPolicheck.Data;
@using System.Text.Json;
@using System.Linq;
@using CommunityToolkit.Maui.Storage;
@inject JobsService JobsService

<div>
    @runStatus
    <button class="btn btn-primary">Browse</button>
</div>


@code {

    public string? runStatus = "Verifying Policheck location";
    public string poliInstall = Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory) +
    @"\policheck\tools\Policheck.exe";


    List<JobInfo> JobsInfo = new List<JobInfo>();

    protected override void OnInitialized()
    {

        var jobs = JobsService.LoadJobs();
        JobsInfo.AddRange(jobs);

        @* bool found = File.Exists(poliInstall); *@
        if (File.Exists(poliInstall))
        {
            runStatus = "Policheck located and ready to run.";
        }

        Console.WriteLine(poliInstall);

    }

    private async void browseFolder(bool temp)
    {
        var folder = await FolderPicker.PickAsync(default);
        if (folder.IsSuccessful)
        {
            //do something
        }
        else
        {
            //do something later
        }
    }
}
